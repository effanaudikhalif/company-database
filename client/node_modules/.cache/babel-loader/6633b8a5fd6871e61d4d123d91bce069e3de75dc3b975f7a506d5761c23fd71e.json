{"ast":null,"code":"import React,{useContext,useEffect}from'react';import ProjectFinder from'../api/ProjectFinder';import{ProjectContext}from'../context/ProjectContext';import updateIcon from\"./updateicon.png\";import deleteIcon from\"./deleteicon.png\";import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProjectList=()=>{const{projects,setProject}=useContext(ProjectContext);let navigate=useNavigate();// Replaces useHistory()\nuseEffect(()=>{const fetchData=async()=>{try{const response=await ProjectFinder.get(\"/\");setProject(response.data);// Adjust based on actual API response structure\n}catch(err){console.error('Failed to fetch project data:',err);}};fetchData();},[setProject]);const handleDelete=async project_id=>{try{const response=await ProjectFinder.delete(\"/\".concat(project_id));if(response.status===200){// Check if the response status is OK\nsetProject(projects.filter(project=>project.project_id!==project_id));window.location.reload();}else{console.error('Failed to delete employee:',response.status);}}catch(err){console.error('Error deleting employee:',err);}};const handleUpdate=project_id=>{navigate(\"/project/\".concat(project_id));};const formatDate=dateString=>{return new Date(dateString).toISOString().split('T')[0];};return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-hover\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"table-active\",children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Project ID\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Client ID\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Start Date\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"End Date\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Description\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Deal Size\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Update\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Delete\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:projects.map(project=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:project.project_id}),/*#__PURE__*/_jsx(\"td\",{children:project.client_id}),/*#__PURE__*/_jsx(\"td\",{children:formatDate(project.start_date)}),/*#__PURE__*/_jsx(\"td\",{children:formatDate(project.end_date)}),/*#__PURE__*/_jsx(\"td\",{children:project.description}),/*#__PURE__*/_jsx(\"td\",{children:project.deal_size}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleUpdate(project.project_id),children:/*#__PURE__*/_jsx(\"img\",{src:updateIcon,alt:\"Update\",style:{width:'25px',height:'25px'}})})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(project.project_id),children:/*#__PURE__*/_jsx(\"img\",{src:deleteIcon,alt:\"Delete\",style:{width:'25px',height:'25px'}})})})]},project.project_id))})]})});};export default ProjectList;","map":{"version":3,"names":["React","useContext","useEffect","ProjectFinder","ProjectContext","updateIcon","deleteIcon","useNavigate","jsx","_jsx","jsxs","_jsxs","ProjectList","projects","setProject","navigate","fetchData","response","get","data","err","console","error","handleDelete","project_id","delete","concat","status","filter","project","window","location","reload","handleUpdate","formatDate","dateString","Date","toISOString","split","className","children","scope","map","client_id","start_date","end_date","description","deal_size","onClick","src","alt","style","width","height"],"sources":["/Users/effanaudikhalif/Desktop/CAST/company-internal/client/src/components/ProjectList.js"],"sourcesContent":["import React, { useContext, useEffect } from 'react';\nimport ProjectFinder from '../api/ProjectFinder';\nimport { ProjectContext } from '../context/ProjectContext';\nimport updateIcon from \"./updateicon.png\"\nimport deleteIcon from \"./deleteicon.png\"\nimport { useNavigate } from 'react-router-dom';\n\n\nconst ProjectList = () => {\n  const { projects, setProject } = useContext(ProjectContext);\n  let navigate = useNavigate(); // Replaces useHistory()\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await ProjectFinder.get(\"/\");\n        setProject(response.data);  // Adjust based on actual API response structure\n      } catch (err) {\n        console.error('Failed to fetch project data:', err);\n      }\n    };\n\n    fetchData();\n  }, [setProject]);\n\n  const handleDelete = async (project_id) => {\n    try {\n      const response = await ProjectFinder.delete(`/${project_id}`);\n      if (response.status === 200) {  // Check if the response status is OK\n        setProject(projects.filter(project => project.project_id !== project_id));\n        window.location.reload();\n      } else {\n        console.error('Failed to delete employee:', response.status);\n      }\n    } catch (err) {\n      console.error('Error deleting employee:', err);\n    }\n  }\n\n  const handleUpdate = (project_id) => {\n    navigate(`/project/${project_id}`)\n  }\n\n  const formatDate = (dateString) => {\n    return new Date(dateString).toISOString().split('T')[0];\n  };\n\n  return (\n    <div className=\"container\">\n      <table className=\"table table-hover\">\n        <thead>\n          <tr className=\"table-active\">\n            <th scope=\"col\">Project ID</th>\n            <th scope=\"col\">Client ID</th>\n            <th scope=\"col\">Start Date</th>\n            <th scope=\"col\">End Date</th>\n            <th scope=\"col\">Description</th>\n            <th scope=\"col\">Deal Size</th>\n            <th scope=\"col\">Update</th>\n            <th scope=\"col\">Delete</th>\n          </tr>\n        </thead>\n        <tbody>\n          {projects.map(project => (\n            <tr key={project.project_id}>\n              <td>{project.project_id}</td>\n              <td>{project.client_id}</td>\n              <td>{formatDate(project.start_date)}</td>\n              <td>{formatDate(project.end_date)}</td>\n              <td>{project.description}</td>\n              <td>{project.deal_size}</td>\n              <td>\n                <button onClick={() => handleUpdate(project.project_id)}>\n                  <img src={updateIcon} alt=\"Update\" style={{ width: '25px', height: '25px' }} />\n                </button>\n              </td>\n              <td>\n                <button onClick={() => handleDelete(project.project_id)}>\n                  <img src={deleteIcon} alt=\"Delete\" style={{ width: '25px', height: '25px' }} />\n                </button>\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n};\n\nexport default ProjectList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}